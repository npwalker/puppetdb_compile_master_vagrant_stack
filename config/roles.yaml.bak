---
roles:
  master:
    private_networks:
      - ip: '0.0.0.0'
        auto_network: true
    provider:
      type: virtualbox
      customize:
        - [modifyvm, !ruby/sym id, '--memory', 2048]
    synced_folders:
      - host_path:  'puppet'
        guest_path: '/root/puppet'
      - host_path:  'files'
        guest_path: '/var/seteam-vagrant-stack'
    provisioners:
      - type: shell
        inline: "echo 'nameserver 8.8.8.8' > /etc/resolv.conf"
      - type: hosts
      - type: pe_bootstrap
        role: :master
      - type: shell
        inline: 'service iptables stop'
#      - type: shell
#        inline: |-
#          /opt/puppet/bin/puppet apply \
#            --confdir=/root/puppet \
#            --ssldir=/etc/puppetlabs/puppet/ssl \
#            --hiera_config=/root/puppet/hiera.yaml \
#            --modulepath=/root/puppet/modules \
#            --exec 'include role::puppetmaster'

  master283:
     private_networks:
       - ip: '0.0.0.0'
         auto_network: true
     provider:
       type: virtualbox
       customize:
         - [modifyvm, !ruby/sym id, '--memory', 1024]
     synced_folders:
       - host_path:  'puppet'
         guest_path: '/root/puppet'
       - host_path:  'files'
         guest_path: '/var/seteam-vagrant-stack'
     provisioners:
       - type: shell
         inline: "echo 'nameserver 8.8.8.8' > /etc/resolv.conf"
       - type: hosts

  master283forrealzyo:
    provisioners:
       - type: pe_bootstrap
         role: :master
         version: '2.8.3'

  master27:
     private_networks:
       - ip: '0.0.0.0'
         auto_network: true
     provider:
       type: virtualbox
       customize:
         - [modifyvm, !ruby/sym id, '--memory', 1024]
     synced_folders:
       - host_path:  'puppet'
         guest_path: '/root/puppet'
       - host_path:  'files'
         guest_path: '/var/seteam-vagrant-stack'
     provisioners:
       - type: shell
         inline: "echo 'nameserver 8.8.8.8' > /etc/resolv.conf"
       - type: hosts
       - type: pe_bootstrap
         role: :master
         version: '2.7.2'

  master31:
     private_networks:
       - ip: '0.0.0.0'
         auto_network: true
     provider:
       type: virtualbox
       customize:
         - [modifyvm, !ruby/sym id, '--memory', 1024]
     synced_folders:
       - host_path:  'puppet'
         guest_path: '/root/puppet'
       - host_path:  'files'
         guest_path: '/var/seteam-vagrant-stack'
     provisioners:
       - type: shell
         inline: "echo 'nameserver 8.8.8.8' > /etc/resolv.conf"
       - type: hosts
       - type: pe_bootstrap
         role: :master
         version: '3.1.0'
#       - type: shell
#         inline: 'service iptables stop'


  master300:
     private_networks:
       - ip: '0.0.0.0'
         auto_network: true
     provider:
       type: virtualbox
       customize:
         - [modifyvm, !ruby/sym id, '--memory', 1024]
     synced_folders:
       - host_path:  'puppet'
         guest_path: '/root/puppet'
       - host_path:  'files'
         guest_path: '/var/seteam-vagrant-stack'
     provisioners:
       - type: shell
         inline: "echo 'nameserver 8.8.8.8' > /etc/resolv.conf"
       - type: hosts
       - type: pe_bootstrap
         role: :master
         version: '3.0.0'

  windows_agent:
    guest: windows
    private_networks:
      - {ip: '0.0.0.0', auto_network: true}
    provisioners:
      - {type: hosts}
      - {type: pe_bootstrap}

  posix_agent_300:
    private_networks:
      - {ip: '0.0.0.0', auto_network: true}
    provisioners:
      - {type: shell, inline: "echo 'nameserver 8.8.8.8' > /etc/resolv.conf"}
      - {type: hosts}
      - type: pe_bootstrap
        version: '3.0.0'
        master: 'master3.0.0-centos'

  posix_agent_301:
    private_networks:
      - {ip: '0.0.0.0', auto_network: true}
    provisioners:
      - {type: shell, inline: "echo 'nameserver 8.8.8.8' > /etc/resolv.conf"}
      - {type: hosts}
      - type: pe_bootstrap
        version: '3.0.1'
        master: 'master3.0.1-centos'

  posix_agent_310:
    private_networks:
      - {ip: '0.0.0.0', auto_network: true}
    provisioners:
      - {type: shell, inline: "echo 'nameserver 8.8.8.8' > /etc/resolv.conf"}
      - {type: hosts}
      - type: pe_bootstrap
        version: '3.1.0'
        master: 'master3.1.0-centos'
